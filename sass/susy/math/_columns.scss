// -----------
// Column math

// Find the number of columns in a given layout
@function column-count(
  $columns: $columns
) {
  @if length($columns) == 1 {
    @return $columns;
  } @else {
    @return length($columns);
  }
}

// Find the total sum of column-units in a layout
@function column-sum(
  $columns: $columns,
  $gutters: $gutters
) {
  $column-sum: 0;
  $gutter-sum: (column-count($columns) - 1) * $gutters;

  @if length($columns) == 1 {
    $column-sum: $columns;
  } @else {
    @each $column in $columns {
      $column-sum: $column-sum + $column;
    }
  }

  @return $column-sum + $gutter-sum;
}

// Find relative width of the column span
@function relative-column-span(
  $span,
  $location : false,
  $columns  : $columns,
  $gutters  : $gutters
) {
  $location : get-location-position($span, $location, $columns);
  $span-sum : false;
  $context  : column-sum($columns, $gutters);

  @if length($columns) == 1 {
    $span-sum: column-sum($span, $gutters);
  } @else {
    $span-columns: ();
    $location: if($location, $location, 1);

    @for $i from $location to ($location + $span) {
      $span-columns: append($span-columns, nth($columns, $i));
    }

    $span-sum: column-sum($span-columns, $gutters);
  }

  @return percentage($span-sum / $context);
}
