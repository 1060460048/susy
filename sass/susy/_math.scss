// ---------------------------------------------------------------------------
// Global math variables
// this is the language that is passed into the math functions, not nessisarily user-facing.

$context: 960px, 100%, 40em !default;
$columns: 12 !default;
$gutter: 10px !default;
$margin: 10px !default;

// ---------------------------------------------------------------------------
// Columns & Context

// Return the number of columns in a given grid.
//
// column-count($columns)
// - $columns   : <intiger> | <list>
//              - unitless integer represents symmetric column count.
//              - list represents set of asymmetric column ratios.
@function column-count(
  $columns
) {
  @if type-of($columns) == number {
    @return $columns;
  }
  @if type-of($columns) == list {
    @return length($columns);
  }
}

// Find context
@function find-context($columns, $guter, $margin) {

  // If auto columns exist, context needs to be calculated.
  @if query-list($columns, auto) != false or length(columns) == 1 {
    @return nth($context, nth(query-list($context, unit($gutter), unit), 1));
  }
  @else {

    // Find sum of columns
    $column-sum: list-sum($columns);

    // Find sum of gutters
    $gutter-sum: $gutter * (column-count($columns) - 1);

    // Find sum of margin
    $margin-sum: list-sum($margin);
    @if type-of($margin) == number {
      $margin-sum: $margin * 2;
    }

    @return $column-sum + $gutter-sum + $margin-sum;
  }
}
