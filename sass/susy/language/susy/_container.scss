// Container Syntax
// ================

// Set a container element
@mixin container(
  $container: get-grid()
) {
  $grid       : parse-grid($container);
  $width      : get-container-width($grid);
  $justify    : get-setting(container-position, $grid);
  $box        : get-setting(box-sizing, $grid);

  @if $box {
    @include box-sizing($box);
  }

  @include float-container($width, $justify);
  @include grid-background($grid);
}

// get the container width:
@function get-container-width(
  $grid: parse-grid()
) {
  // if there is a container width, use it
  $width      : get-setting(container, $grid);
  $width      : if($width, $width, $container);

  @if $width == auto {
    // if we have a column width, calculate container from that
    $column-width-setting: get-setting(column-width, $grid);

    @if $column-width-setting {
      $columns-setting: get-setting(columns, $grid);
      $gutters-setting: get-setting(gutters, $grid);
      $outer: if(get-setting(gutter-position, $grid) == inside, true, false);

      $width: calculate-container-width($columns-setting, $gutters-setting, $column-width-setting, $outer);
    } @else {
      // if we have nothing, default to 100%
      $width: 100%;
    }
  }

  @return $width;
}
