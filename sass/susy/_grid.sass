!grid_unit ||= "em"
!total_cols ||= 16
!col_width ||= 4
!gutter_width ||= 1

=grid-container
  +clearfix
  :margin-left auto
  :margin-right auto
  :width= (!total_cols * !col_width) + ((!total_cols - 1) * !gutter_width) + !grid_unit
  :max-width 99%

=get-col-width(!n, !context = !total_cols)
  :width= ((!n * !col_width) + ((!n - 1) * !gutter_width)) / ((!context * !col_width) + ((!context - 1) * !gutter_width)) * 100 + "%"

=grid-col(!n, !context = !total_cols)
  +get-col-width(!n, !context)
  :display inline
  :float left
  :margin-right= !gutter_width / ((!context * !col_width) + ((!context - 1) * !gutter_width)) * 100 + "%"

=last
  :margin-right= 0

=right
  :display inline
  :float right

=grid-prefix(!n, !context = !total_cols)
  :padding-left= ((!n * !col_width) + (!n * !gutter_width)) / ((!context * !col_width) + ((!context - 1) * !gutter_width)) * 100 + "%"

=grid-suffix(!n, !context = !total_cols)
  :padding-right= ((!n * !col_width) + (!n * !gutter_width)) / ((!context * !col_width) + ((!context - 1) * !gutter_width)) * 100 + "%"