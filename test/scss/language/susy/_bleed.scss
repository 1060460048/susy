// Bleed Syntax Tests
// ==================

@include test-module('Bleed Syntax') {

  // bleed [mixin]
  // -------------

  @include output-test('bleed') {

    // simple
    @include assert-setup('simple', $grid: 9 .5) {
      .nest { @include squish(1); }
    }
    @include assert-output(
      'Items should bleed 1 column outside their nested context'
    ) {
      .test { @include bleed-x(1 of 7); }
      .expect {
        margin-left: -15%;
        padding-left: 15%;
        margin-right: -15%;
        padding-right: 15%;
      }
    }

    // inside
    @include assert-setup('inside', $grid: 10 .25 inside) {
      .nest { @include squish(1); }
    }
    @include assert-output(
      'Items should bleed 1 column, and retain their gutters'
    ) {
      .test { @include bleed-x(1 of 8); }
      .expect {
        margin-left: -12.5%;
        padding-left: 13.75%;
        margin-right: -12.5%;
        padding-right: 13.75%;
      }
    }

    // explicit inside-static
    @include assert-setup('explicit', $grid: 10 (4em 1em) inside-static) {
      .nest {
        @include leader;
        @include trailer;
        @include squish(1);
      }
    }
    @include assert-output(
      'Items should bleed 1em on all sides, and retain their static gutters'
    ) {
      .test { @include bleed(1em of 8); }
      .expect {
        margin: -1em;
        padding: 1.5em;
      }
    }
  }

  // parse-bleed [function]
  // ----------------------

  @include test('[function] parse-bleed') {

    $test: parse-bleed(1em 2em 3em 1em of 10 inside);
    $expect: map-merge($susy-defaults, (
      span: 1em 2em 3em 1em,
      columns: 10,
      gutter-position: inside,
      outer: outer,
    ));
    @include assert-equal($test, $expect,
      'Returns multiple spans as a list, along with context.');
  }

}
