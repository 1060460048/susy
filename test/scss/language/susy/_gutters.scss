// Gutter Syntax
// =============

@include test-module('Gutter Syntax') {

  // gutters
  // -------

  @include output-test('gutters') {
    @include assert-setup('auto', $grid: 7 .5 split);
    @include assert-output(
      'Item should have 2.5% margin-gutters added before and after'
    ) {
      .test { @include gutters(of 7); }
      .expect {
        margin-left: 2.5%;
        margin-right: 2.5%;
      }
    }

    @include assert-setup('inside-static', $grid: 7 (4em 2em) inside-static);
    @include assert-output(
      'Item should have 1em padding-gutters added before and after'
    ) {
      .test { @include gutters; }
      .expect {
        padding-left: 1em;
        padding-right: 1em;
      }
    }

    @include assert-setup('explicit', $grid: 7 .5 inside);
    @include assert-output(
      'Item should have 5em padding-gutters added before and after'
    ) {
      .test { @include gutters(10em); }
      .expect {
        padding-left: 5em;
        padding-right: 5em;
      }
    }
  }

  // gutter
  // ------

  @include test('[function] gutter') {

    // after
    $test: gutter(of 7 .5 after);
    $expect: 5%;
    @include assert-equal($test, $expect,
      'The default gutter for "7 .5 after" should be "#{$expect}"');

    // inside
    $test: gutter(of 8 .25 inside);
    $expect: 1.25%;
    @include assert-equal($test, $expect,
      'The default gutter for "6 .5 fluid inside" should be "#{$expect}"');

    // explicit
    $gutter: of (1 2 3 2 1) (4em 1em) static;
    $test: gutter($gutter);
    $expect: 1em;
    @include assert-equal($test, $expect,
      'The gutter-width for "#{$gutter}" should be "#{$expect}"');

    @include original-grid;
  }

  // get-gutter-width
  // ----------------

  @include test('[function] get-gutter-width') {
    $cols: 1 2 3 2 1;

    // static
    $gutter: get-gutter-width(of $cols (40px 10px) static);
    $expect: 10px;
    @include assert-equal($gutter, $expect,
      'The static gutter-width of "(40px 10px)" should be "10px"');

    // fluid
    $gutter: get-gutter-width(of $cols .25);
    $expect: 2.5%;
    @include assert-equal($gutter, $expect,
      'The fluid gutter-width of "(1 2 3 2 1) .25" should be "2.5%"');
  }

  // get-gutters
  // -----------

  @include test('[function] get-gutters') {
    $cols: 7;
    $guts: .5;

    // override before
    $test: get-gutters(30% of $cols $guts fluid before);
    $expect: 30% null;
    @include assert-equal($test, $expect,
      'A "30% before" gutter should return "30% null" gutters');

    // override after
    $test: get-gutters(2em of $cols $guts fluid after);
    $expect: null 2em;
    @include assert-equal($test, $expect,
      'A "2em after" gutter should return "null 2em" gutters');

    // override inside
    $test: get-gutters(30px of $cols $guts fluid inside);
    $expect: 15px 15px;
    @include assert-equal($test, $expect,
      'A "30px inside" gutter should return "15px 15px" gutters');

    // before
    $test: get-gutters($cols $guts before);
    $expect: 5% null;
    @include assert-equal($test, $expect,
      'A relative gutter from "7 .5 before" should return "5% null" gutters');

    // after
    $test: get-gutters($cols $guts after);
    $expect: null 5%;
    @include assert-equal($test, $expect,
      'A relative gutter from "7 .5 after" should return "null 5%" gutters');

    // split
    $test: get-gutters($cols $guts split);
    $expect: 2.5% 2.5%;
    @include assert-equal($test, $expect,
      'A relative gutter from "7 .5 split" should return "2.5% 2.5%" gutters');

    // inside
    $test: get-gutters(8 .25 inside);
    $expect: 1.25% 1.25%;
    @include assert-equal($test, $expect,
      'A relative gutter from "8 .25 inside" should return "1.25% 1.25%" gutters');

    // inside-static
    $test: get-gutters($cols (4em 2em) fluid inside-static);
    $expect: 1em 1em;
    @include assert-equal($test, $expect,
      'A gutter from "7 (4em 2em) inside-static" should return "1em 1em" gutters');
  }

}
