// Margin Syntax Tests
// ===================

@include output-test-module('Margin Syntax') {

  // pre
  // ---

  @include output-test('pre') {
    @include assert-setup($grid: 7 .5);
    @include assert-output(
      'Items should have 3-columns margin before.'
    ) {
      .test { @include pre(3); }
      .expect { margin-left: 45%; }
    }
  }

  // post
  // ----

  @include output-test('post') {
    @include assert-setup($grid: (1 2 3 2 1) .25);
    @include assert-output(
      'Items should have 2-columns margin after.'
    ) {
      .test { @include post(last 2); }
      .expect { margin-right: 35%; }
    }
  }

  // push
  // ----

  @include output-test('push') {
    @include assert-setup($grid: (1 2 3 2 1) .25);
    @include assert-output(
      'Items should have 2-columns margin before.'
    ) {
      .test { @include push(first 2); }
      .expect { margin-left: 35%; }
    }
  }

  // pull
  // ----

  @include output-test('pull') {
    @include assert-setup($grid: (1 2 3 2 1) .25) {
      .spacer { @include span(first 2); }
      .test, .expect { @include span(3 at 2); }
    }
    @include assert-output(
      'Items should pull 1-column, overlapping the spacer.'
    ) {
      .test { @include pull(1 at 2); }
      .expect { margin-left: -22.5%; }
    }
  }

  // squish
  // ------

  @include output-test('squish') {
    // simple
    @include assert-setup('simple', $grid: (1 2 3 2 1) .25);
    @include assert-output(
      'Items should have 2-columns margin before and after.'
    ) {
      .test { @include squish(first 2, last 2); }
      .expect {
        margin-left: 35%;
        margin-right: 35%;
      }
    }

    // nested
    @include assert-setup('nested', $grid: 7 1/5 inside) {
      .nest { @include squish(1); }
    }
    @include assert-output(
      'Items should have 1-column margin before, and 2 after - nested.'
    ) {
      .test { @include squish(1, 2 of 5); }
      .expect {
        margin-left: 20%;
        margin-right: 40%;
      }
    }
  }

  // bleed
  // -----

  @include output-test('bleed') {

    // simple
    @include assert-setup('simple', $grid: 9 .5) {
      .nest { @include squish(1); }
    }
    @include assert-output(
      'Items should bleed 1 column outside their nested context'
    ) {
      .test { @include bleed-x(1 of 7); }
      .expect {
        margin-left: -15%;
        padding-left: 15%;
        margin-right: -15%;
        padding-right: 15%;
      }
    }

    // inside
    @include assert-setup('inside', $grid: 10 .25 inside) {
      .nest { @include squish(1); }
    }
    @include assert-output(
      'Items should bleed 1 column, and retain their gutters'
    ) {
      .test { @include bleed-x(1 of 8); }
      .expect {
        margin-left: -12.5%;
        padding-left: 13.75%;
        margin-right: -12.5%;
        padding-right: 13.75%;
      }
    }

    // explicit inside-static
    @include assert-setup('explicit', $grid: 10 (4em 1em) inside-static) {
      .nest {
        @include leader;
        @include trailer;
        @include squish(1);
      }
    }
    @include assert-output(
      'Items should bleed 1em on all sides, and retain their static gutters'
    ) {
      .test { @include bleed(1em of 8); }
      .expect {
        margin: -1em;
        padding: 1.5em;
      }
    }
  }

}
