// AG tests
// ========

@import "compass";
@import "susy";
@import "compass/reset";

// Complex AG tests
// ----------------

// $show-grids: false;

@mixin ag-test(
  $class,
  $isolation: null
) {
  .#{$class} {
    @include container;
    @include leader(.5);
    @include trailer(.5);

    > .size1of5 {
      min-height: rhythm(10);
      &:first-of-type { @include span(2 at 1 $isolation); }
      ~ .size1of5 { @include span(last 2 $isolation); }
    }
    > .size3of5 {
      @include span(6 at 3 $isolation);
      > .size1of2 {
        &:first-child { @include span(3 at 1 of nested(6 at 3) $isolation); }
        + .size1of2 { @include span(last 3 of nested(6 at 3) $isolation); }
      }
      > .full {
        clear: both;
        background: none;
      }
    }

    .full {
      @include nested(6 at 3) {
        .size1of3 {
          @include span(first 2 $isolation);
          min-height: rhythm(6.5);
        }
        .size2of3 {
          @include span(4 omega $isolation);
        }
      }
    }

    .size2of3 {
      .size1of2 {
        @include nested(4 at 5) {
          &:first-child { @include span(2 alpha $isolation); }
          + .size1of2 { @include span(last 2 of $isolation); }
        }
      }
      .full {
        clear: both;
      }
    }

    .isolation div {
      @include isolate-grid-output(2, $columns, $gutters);
    }
  }
}

// Symmetrical
// -----------

$a-grid: 10 (4em 1em);

@include use-grid($a-grid, clean) {
  @include ag-test(symmetrical);
}

// Asymmetrical
// ------------

$b-grid: 80% (.5 2 1.25 1 3.25 1.75 3 2 1 3.75) .5;

@include use-grid($b-grid, clean) {
  @include ag-test(asymmetrical, isolate);
}

// Static
// ------

@include use-grid(10 (60px 20px) static hide, clean) {
  @include ag-test(static);
}


// Styles
// ------

@include establish-baseline;

body { font-family: sans-serif; }

h1 {
  background: #333;
  color: #eee;
  text-transform: uppercase;
}
h1, h2, h3 {
  clear: both;
  padding: rhythm(.5);
  font-weight: bold;
}

.grid-element {
  @include trailer(.5);
  opacity: .5;
  min-height: rhythm(3);
}

.size1of2 { background: #f99; }
.size1of5 { background: #aef; }
.size1of3 { background: orange; }
.full.grid-element { background: pink; }

.isolation {
  @include clearfix;
  clear: both;
  div {
    @include trailer(.5);
    height: rhythm(1);
    background: red;
  }
}
